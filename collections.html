<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Titre de la nouvelle page -->
    <title>Page de Contenu - SCD</title>

    <!-- 1. Fichiers CSS -->
    <link rel="stylesheet" href="css/menu_de_navigation.css">
    <link rel="stylesheet" href="css/styles.css">

    <!-- 2. Script Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
        
    <!-- 3. Lien pour les icônes Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

</head>
<!-- MODIFIÉ: Fond de page beige ENCORE PLUS clair -->
<body class="bg-gray-50">
    
    <!-- ============================================= -->
    <!--     HEADER (NE PAS MODIFIER)                  -->
    <!-- ============================================= -->
       <div id="header-container" class="sticky top-0 z-50 w-full"></div>
    <!-- ============================================= -->
    <!--     FIN DU HEADER                             -->
    <!-- ============================================= -->


    <!-- ============================================= -->
    <!--     DÉBUT DU CONTENU DE LA PAGE (MODIFIABLE)  -->
    <!-- ============================================= -->
    
    <!-- MODIFIÉ: Grille en 5 colonnes, pleine largeur avec padding -->
    <div class="w-full py-12 px-4 sm:px-6 lg:px-40">
        <!-- MODIFIÉ: Grille à 5 colonnes -->
        <div class="lg:grid lg:grid-cols-5 lg:gap-8">

            <!-- COLONNE DE GAUCHE (MENU) -->
            <!-- MODIFIÉ: Prend 1/5 de la largeur -->
            <aside class="lg:col-span-1 mb-12 lg:mb-0">
                <!-- 'sticky' : le menu reste visible au scroll -->
                <!-- MODIFIÉ: 'bg-stone-200' (beige foncé) -->
                <nav id="side-nav" class="sticky top-28 space-y-2 bg-stone-200 rounded-lg p-4">
                    
                    <!-- Chapeau 1: Lien direct -->
                    <a href="https://olivierscdum.github.io/maquette/BU.html" class="side-nav-item">
                        <span class="material-symbols-outlined">domain</span>
                        <span>Les BUs</span>
                    </a>


                     <!-- Chapeau 2: Lien direct -->
                    <a href="https://olivierscdum.github.io/maquette/services.html" class="side-nav-item">
                        <span class="material-symbols-outlined">design_services</span>
                        <span>Services</span>
                    </a>
                    <!-- Chapeau 2: Accordéon 
                    <div>
                        <button type="button" class="side-nav-toggle">
                            <span class="flex items-center">
                                <span class="material-symbols-outlined">design_services</span>
                                <span>Services en BU</span>
                            </span>
                            <span class="material-symbols-outlined icon-toggle">chevron_right</span>
                        </button>
                            -->
                        <!-- Sous-menu (caché par défaut) 
                        <div class="side-nav-submenu hidden">
                            <a href="#service-emprunter" class="side-nav-sublink">Emprunter / rendre</a>
                            <a href="#service-peb" class="side-nav-sublink">Faire venir un document</a>
                            <a href="#service-prolonger" class="side-nav-sublink">Prolonger un prêt</a>
                            <a href="#service-espace" class="side-nav-sublink">Trouver un espace de travail</a>
                        </div>
                    </div>
                        -->

                    <!-- Chapeau 3: Lien direct 
                    <a href="https://olivierscdum.github.io/maquette/collections.html" class="side-nav-item">
                        <span class="material-symbols-outlined">collections_bookmark</span>
                        <span>Ressources documentaires</span>
                    </a>
                -->
                    <!-- Chapeau 3: Accordéon  -->
                <div> <button type="button" class="side-nav-toggle active" data-default-active="true">
                                <span class="flex items-center">
                                    <span class="material-symbols-outlined">collections_bookmark</span>
                                    <span>Ressources documentaires</span>
                                </span>
                                <span class="material-symbols-outlined icon-toggle rotate-90">chevron_right</span>
                            </button>
                    
                            <div class="side-nav-submenu">
                                
                                <div> 
                                    <button type="button" class="side-nav-toggle">
                                        <span class="flex items-center">
                                            <span>Par discipline</span>
                                        </span>
                                    </button>
                                                                       
                                </div>

                            </div>
                        </div>
                    
                       

                     <!-- Chapeau 4: Lien direct -->
                    <a href="https://olivierscdum.github.io/maquette/formation.html" class="side-nav-item">
                        <span class="material-symbols-outlined">school</span>
                        <span>Formation / Accompagnement</span>
                    </a>
                    
                    <!-- Chapeau 4: Accordéon (OUVERT PAR DÉFAUT, L1 ACTIF) 
                    <div>
                    -->
                        <!-- L1 Toggle = ACTIF (rouge) et TOURNÉ 
                        <button type="button" class="side-nav-toggle active" data-default-active="true"> 
                            <span class="flex items-center">
                                <span class="material-symbols-outlined">school</span>
                                <span>Formation / Accompagnement</span>
                            </span>
                            <span class="material-symbols-outlined icon-toggle rotate-90">chevron_right</span>
                        </button>
                    -->
                        <!-- L1 Sub-menu (OUVERT) 
                        <div class="side-nav-submenu"> 
                            <a href="#formation-etudiants" class="side-nav-sublink">Etudiants</a>
                            <a href="#formation-doctorants" class="side-nav-sublink">Doctorants</a>
                          -->  
                            <!-- L2 Accordéon (indenté) 
                 
                            <div class="pl-4">    --><!-- Indentation -->
                                <!-- L2 Toggle = PAS 'active' (pas rouge) 
                                <button type="button" class="side-nav-toggle">
                                    <span class="flex items-center">
                                        <span>Enseignants / Personnel</span>
                                    </span>
                                -->
                                    <!-- L2 Icon = TOURNÉ (ouvert) 
                                    <span class="material-symbols-outlined icon-toggle rotate-90">chevron_right</span>
                                </button>
                    -->
                                <!-- L2 Sub-menu (OUVERT) 
                                <div class="side-nav-submenu">
                    -->
                                    <!-- L2 Link = PAS 'active' 
                                    <a href="#ens-enseignement" class="side-nav-sublink">Pour l'enseignement</a>
                                    <a href="#ens-recherche" class="side-nav-sublink">Pour la recherche</a>
                                    <a href="#ens-formation-continue" class="side-nav-sublink">Formation continue</a>
                                </div>
                            </div>

                        </div>
                    </div>
                -->
                    <!-- Chapeau 5: Lien direct -->
                    <a href="https://olivierscdum.github.io/maquette/missions.html" class="side-nav-item">
                        <span class="material-symbols-outlined">info</span>
                        <span>Nous connaître</span>
                    </a>

                </nav>
            </aside>

    <!-- ============================================= -->
    <!--     COLONNE DE DROITE (MODIFIABLE)  -->
    <!-- ============================================= -->
            <!-- MODIFIÉ: Prend 4/5 (80%) de la largeur -->
            <main class="lg:col-span-4 bg-white rounded-xl shadow-lg p-6 sm:p-8">
                
                <!-- 1. BANDEAU TITRE (MODIFIÉ: Ajout de sticky) -->
                <!-- Il se collera à (top-20) du HAUT, juste sous le header principal -->
                <div class="bg-white mb-8 border-b border-gray-200 pb-6 -mt-6 -mx-6 sm:-mt-8 sm:-mx-8 px-6 sm:px-8 rounded-t-xl">
                    <h1 class="text-3xl font-bold text-gray-800 flex items-center gap-3">
                        <span class="material-symbols-outlined text-4xl text-rose-600">collections_bookmark</span>
                        <span>Ressources documentaires</span>
                    </h1>
                </div>

                <!-- 2. ZONE DE CONTENU (FOND BLANC) -->
                <div class="prose max-w-none">
                    
                    <!-- CONTENU LIBRE ICI (Bien formaté) -->
                    <img src="https://lib.uliege.be/sites/default/files/styles/max_1300x1300/public/2024-10/learning-center-collections.png?itok=8cIg0OkT">
                    
                    <h3>Encart de présentation générale</h3>

                    <p>Le SCD propose des collections….</p>

                    
                    
                    <!-- Section pour "Resources documentaires" -->
                    <section id="discipline" class="mt-8">
                        <h2>Explorez par discipline</h2>

                        <!-- Bandeau "BASES PAR DISCIPLINES" -->
           <section class="bg-stone-100 py-12 shadow-sm -mx-6 sm:-mx-8">
        
        <div class="container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"> 
            
            <h1 class="text-3xl font-bold text-gray-800 text-center mb-12">
                
            </h1>

            <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-5">

                <a href="https://olivierscdum.github.io/maquette/droit.html" title="Ressources documentaires en Droit" class="card group">
                    <span class="material-symbols-outlined card-icon">
                        balance
                    </span>
                    <h3 class="card-title">
                        Droit
                    </h3>
                </a>

                <a href="#" title="Ressources documentaires en Sciences et techniques" class="card group">
                    <span class="material-symbols-outlined card-icon">
                        biotech
                    </span>
                    <h3 class="card-title">
                        Sciences et techniques
                    </h3>
                </a>

                <a href="" title="Ressources documentaires en Sciences économiques et gestion" class="card group">
                    <span class="material-symbols-outlined card-icon">
                        Finance
                    </span>
                    <h3 class="card-title">
                        Sciences économiques et gestion
                    </h3>
                </a>

                <a href="#" title="Ressources documentaires en Santé" class="card group">
                    <span class="material-symbols-outlined card-icon">
                        Medication
                    </span>
                    <h3 class="card-title">
                        Santé
                    </h3>
                </a>

                   <a href="#" title="STAPS" class="card group">
                    <span class="material-symbols-outlined card-icon">
                        exercise
                    </span>
                    <h3 class="card-title">
                        STAPS
                    </h3>
                </a>

            </div> <!-- Fin de la grille -->

        </div> <!-- Fin du container -->
    </section>
    <!-- Fin Bandeau "Missions du SCD" -->
                    </section>

                    
                     <section id="ressource-um" class="mt-8">
                            <h2>Patrimoine écrit</h2>
                            
                            <ul>
                                <li>Thèse UM</li>
                                <li>Mémoires UM</li>
                                <li>Autres documents UM</li>
                                <li>Collections patrimoniales</li>
                            </ul>
                            
                        </section>
                    </section>

                    <!-- Section boutons engagement" -->
 <section class="mt-12 bg-stone-100 py-16 -mx-6 sm:-mx-8 px-6 sm:px-8">
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">

            <a href="#" class="not-prose block p-6 rounded-lg shadow-md transition-all hover:shadow-lg bg-white">
                <div class="flex flex-col items-center text-center h-full justify-center">
                    <span class="material-symbols-outlined text-rose-600 text-4xl mb-3">help</span>
                    <span class="text-lg font-semibold text-gray-800">Vous ne trouvez pas ?</span>
                </div>
            </a>

            <a href="#" class="not-prose block p-6 rounded-lg shadow-md transition-all hover:shadow-lg bg-white">
                <div class="flex flex-col items-center text-center h-full justify-center">
                    <span class="material-symbols-outlined text-rose-600 text-4xl mb-3">menu_book</span>
                    <span class="text-lg font-semibold text-gray-800">Suggérer un achat</span>
                </div>
            </a>

            <a href="#" class="not-prose block p-6 rounded-lg shadow-md transition-all hover:shadow-lg bg-white">
                <div class="flex flex-col items-center text-center h-full justify-center">
                    <span class="material-symbols-outlined text-rose-600 text-4xl mb-3">volunteer_activism</span>
                    <span class="text-lg font-semibold text-gray-800">Proposer un don</span>
                </div>
            </a>

             <a href="#" class="not-prose block p-6 rounded-lg shadow-md transition-all hover:shadow-lg bg-white">
                <div class="flex flex-col items-center text-center h-full justify-center">
                    <span class="material-symbols-outlined text-rose-600 text-4xl mb-3">library_books</span>
                    <span class="text-lg font-semibold text-gray-800">Enseigant : transmettre une bibliographie</span>
                </div>
            </a>

        </div>
    </section>
    <!-- Fin de Section boutons engagement" -->

                </div>
            </main> <!-- Fin du cadre blanc -->

        </div>
    </div> <!-- Fin du container/grid -->

    <!-- ============================================= -->
    <!--     FIN DU CONTENU DE LA PAGE                 -->
    <!-- ============================================= -->


    <!-- ============================================= -->
    <!--     FOOTER (PLEINE LARGEUR)                   -->
    <!-- ============================================= -->
   <div id="footer-container"></div>
    <!-- ============================================= -->
    <!--     FIN DU FOOTER                             -->
    <!-- ============================================= -->
    
    <!-- Script pour le menu (original) -->
    <script>
    // --- 1. CHARGEMENT DU HEADER ---
    fetch('header.html')
        .then(response => {
            if (!response.ok) throw new Error('Erreur chargement header');
            return response.text();
        })
        .then(data => {
            document.getElementById('header-container').innerHTML = data;

            // IMPORTANT : On charge le script du menu UNIQUEMENT quand le header est là
            const script = document.createElement('script');
            script.src = 'js/menu_de_navigation.js'; 
            document.body.appendChild(script);
        })
        .catch(error => console.error('Problème Header:', error));

    // --- 2. CHARGEMENT DU FOOTER ---
    fetch('footer.html')
        .then(response => {
            if (!response.ok) throw new Error('Erreur chargement footer');
            return response.text();
        })
        .then(data => {
            document.getElementById('footer-container').innerHTML = data;
        })
        .catch(error => console.error('Problème Footer:', error));
</script>

    <!-- 
      SCRIPT CORRIGÉ ET FINAL: Tous les scripts du menu latéral sont regroupés ici 
    -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const toggles = document.querySelectorAll('.side-nav-toggle');
            const navLinks = document.querySelectorAll('.side-nav-sublink');
            // ** CORRIGÉ: On observe que les <section> avec ID **
            const sections = document.querySelectorAll('main [id]');

            // --- SCRIPT 1: Gestion de l'accordéon au clic ---
            toggles.forEach(function (toggle) {
                toggle.addEventListener('click', function (event) {
                    
                    const submenu = this.nextElementSibling;
                    const icon = this.querySelector('.icon-toggle');

                    // Vérifie que l'élément suivant est bien un sous-menu
                    if (submenu && submenu.classList.contains('side-nav-submenu')) {
                        event.preventDefault(); 
                        submenu.classList.toggle('hidden');
                        this.classList.toggle('active');
                        if (icon) {
                            icon.classList.toggle('rotate-90');
                        }
                    }
                });
            });

            // --- SCRIPT 2: "Scroll-Spy" pour surligner le menu en fonction du défilement ---
            if(sections.length > 0 && navLinks.length > 0) {
                const observer = new IntersectionObserver((entries) => {
                    // D'abord, on efface tous les liens actifs (L3)
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                    });
                    
                    // On efface tous les 'toggles' L2 actifs
                    document.querySelectorAll('.side-nav-toggle.active').forEach(toggle => {
                        // On ne retire pas 'active' du L1 (Formation) qui est actif par défaut
                        if (!toggle.hasAttribute('data-default-active')) {
                            toggle.classList.remove('active');
                        }
                    });

                    // On trouve la dernière entrée visible (la plus basse à l'écran)
                    const visibleEntries = entries.filter(entry => entry.isIntersecting);
                    const lastVisibleEntry = visibleEntries[visibleEntries.length - 1];

                    if (lastVisibleEntry) {
                        const id = lastVisibleEntry.target.getAttribute('id');
                        const activeLink = document.querySelector(`.side-nav-sublink[href="#${id}"]`);
                        
                        if (activeLink) {
                            // 1. Activer le lien L3
                            activeLink.classList.add('active');
                            
                            // 2. Activer le parent L2 (s'il existe)
                            const l2Submenu = activeLink.closest('.side-nav-submenu');
                            if (l2Submenu) {
                                const l2Toggle = l2Submenu.previousElementSibling;
                                if (l2Toggle && l2Toggle.classList.contains('side-nav-toggle')) {
                                    l2Toggle.classList.add('active');
                                }
                            }
                        }
                    }
               }, { 
          
                    /* MODIFIÉ: Aligné sur le scroll-margin-top de 170px */
                    rootMargin: '-180px 0px -80% 0px', 
                    threshold: 0
                });

                sections.forEach(section => {
                    observer.observe(section);
                });
            }

            // --- SCRIPT 3: Ouverture de TOUS les accordéons parents si on arrive avec une ancre (#) ---
            if (window.location.hash) {
                const hash = window.location.hash;
                const targetLink = document.querySelector(`.side-nav-sublink[href="${hash}"]`);
                
                if (targetLink) {
                    // (On efface d'abord les classes "par défaut" codées en dur)
                    document.querySelectorAll('.side-nav-toggle.active').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.icon-toggle.rotate-90').forEach(i => i.classList.remove('rotate-90'));
                    document.querySelectorAll('.side-nav-submenu:not(.hidden)').forEach(s => s.classList.add('hidden'));

                    // Boucle pour remonter et ouvrir tous les parents
                    let current = targetLink;
                    while (current = current.closest('.side-nav-submenu')) {
                        if (current.classList.contains('hidden')) {
                            const toggle = current.previousElementSibling;
                            const icon = toggle.querySelector('.icon-toggle');
                            
                            current.classList.remove('hidden');
                            toggle.classList.add('active'); // Ouvre et met en rouge le parent
                            if (icon) {
                                icon.classList.add('rotate-90');
                            }
                        }
                        current = current.parentElement; 
                    }
                    targetLink.classList.add('active');
                }
            } else {
                // --- COMPORTEMENT PAR DÉFAUT (SI PAS D'ANCRE) ---
                // Ouvre L1 ("Formation") et L2 ("Enseignants")
                
                // Cible le 3e 'toggle' (0=Services, 1=Ressources, 2=Formation)
                const formationToggle = document.querySelectorAll('.side-nav-toggle')[2]; 
                if(formationToggle) {
                    const submenu = formationToggle.nextElementSibling;
                    const icon = formationToggle.querySelector('.icon-toggle');
                    
                    formationToggle.classList.add('active'); // L1 Chapeau est ROUGE
                    formationToggle.setAttribute('data-default-active', 'true'); // Marqueur pour le Script 2
                    
                    submenu.classList.remove('hidden'); // L1 sous-menu est visible
                    if(icon) {
                        icon.classList.add('rotate-90'); // L1 icône est tournée
                    }
                    
                    // Cible le L2 'toggle' ("Enseignants / Personnel")
                    const enseignantToggle = submenu.querySelectorAll('.side-nav-toggle')[0]; // [0=Enseignants]
                    if (enseignantToggle) {
                         const submenuL2 = enseignantToggle.nextElementSibling;
                         const iconL2 = enseignantToggle.querySelector('.icon-toggle');

                         // L2 N'EST PAS ROUGE
                         submenuL2.classList.remove('hidden'); // L2 sous-menu est visible
                         if(iconL2) {
                            iconL2.classList.add('rotate-90'); // L2 icône est tournée
                         }
                    }
                }
            }

        });
    </script>

</body>
</html>
